<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Select Service - OneScript</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div id="header"></div>

  <div class="container">
    <h1 class="page-title">Select a Service</h1>
    <p class="page-subtitle">Choose the healthcare service you need. Only Erectile Dysfunction is available now.</p>

    <div class="service-grid" id="servicesGrid">
      <!-- Services will be loaded dynamically -->
    </div>

    <div style="text-align: center; margin-top: 2rem;">
      <button class="btn-primary" id="continueBtn" onclick="continueToAssessment()" disabled>Continue â†’</button>
    </div>
  </div>

  <div id="footer"></div>

  <script src="../js/app.js"></script>
  <script>
    let selectedDiseaseId = null;

    // Load available diseases/services
    function loadServices() {
      const diseases = JSON.parse(localStorage.getItem('diseases') || '[]');
      const servicesGrid = document.getElementById('servicesGrid');
      
      if (diseases.length === 0) {
        servicesGrid.innerHTML = '<div class="service-card"><h3>No services available</h3><p>Please contact support.</p></div>';
        return;
      }

      diseases.forEach(disease => {
        const serviceCard = document.createElement('div');
        serviceCard.className = 'service-card';
        serviceCard.onclick = function() {
          selectService(disease.id, this);
        };
        serviceCard.innerHTML = `
          <h3>${disease.name}</h3>
          <p>${disease.description || 'Get professional assessment and treatment from licensed healthcare providers.'}</p>
        `;
        servicesGrid.appendChild(serviceCard);
      });
    }

    // Select service
    function selectService(diseaseId, cardElement) {
      selectedDiseaseId = diseaseId;
      const cards = document.querySelectorAll('.service-card');
      cards.forEach(card => card.classList.remove('selected'));
      cardElement.classList.add('selected');
      document.getElementById('continueBtn').disabled = false;
    }
    window.selectService = selectService;

    // Continue to assessment
    function continueToAssessment() {
      if (!selectedDiseaseId) return;
      sessionStorage.setItem('selectedDisease', selectedDiseaseId);
      window.location.href = `assessment.html?disease=${selectedDiseaseId}`;
    }
    window.continueToAssessment = continueToAssessment;

    // Initialize
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadServices);
    } else {
      loadServices();
    }
  </script>
</body>
</html>

